"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _models=require("../models");var _react=require("react");var _reactNativeReanimated=require("react-native-reanimated");var _default=function _default(_ref){var itemWidth=_ref.itemWidth,itemHeight=_ref.itemHeight,numColumns=_ref.numColumns,isEditing=_ref.isEditing,shouldVibrate=_ref.shouldVibrate,isDragging=_ref.isDragging,isDraggingItem=_ref.isDraggingItem,index=_ref.index,animDirection=_ref.animDirection,animMoveDuration=_ref.animMoveDuration;var movementOffset=(0,_reactNativeReanimated.useSharedValue)({x:0,y:0});var rotationOffset=(0,_reactNativeReanimated.useSharedValue)(0);var animatedStyles=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _f=function _f(){return{transform:[{translateX:!isDragging||isDraggingItem?movementOffset.value.x:(0,_reactNativeReanimated.withTiming)(movementOffset.value.x,{duration:animMoveDuration,easing:_reactNativeReanimated.Easing.out(_reactNativeReanimated.Easing.exp)})},{translateY:!isDragging||isDraggingItem?movementOffset.value.y:(0,_reactNativeReanimated.withTiming)(movementOffset.value.y,{duration:animMoveDuration,easing:_reactNativeReanimated.Easing.out(_reactNativeReanimated.Easing.exp)})},{rotateZ:`${rotationOffset.value}deg`}]};};_f._closure={isDragging:isDragging,isDraggingItem:isDraggingItem,movementOffset:movementOffset,withTiming:_reactNativeReanimated.withTiming,animMoveDuration:animMoveDuration,Easing:{out:_reactNativeReanimated.Easing.out,exp:_reactNativeReanimated.Easing.exp},rotationOffset:rotationOffset};_f.asString="function _f(){const{isDragging,isDraggingItem,movementOffset,withTiming,animMoveDuration,Easing,rotationOffset}=jsThis._closure;{return{transform:[{translateX:!isDragging||isDraggingItem?movementOffset.value.x:withTiming(movementOffset.value.x,{duration:animMoveDuration,easing:Easing.out(Easing.exp)})},{translateY:!isDragging||isDraggingItem?movementOffset.value.y:withTiming(movementOffset.value.y,{duration:animMoveDuration,easing:Easing.out(Easing.exp)})},{rotateZ:rotationOffset.value+\"deg\"}]};}}";_f.__workletHash=16128744933100;_f.__location="/Users/tuehoang/workspace/react-native/react-native-drag-sort-gridview/src/components/useReanimHooks.tsx (38:42)";_f.__optimalization=2;return _f;}());var startRotate=(0,_react.useCallback)(function(){rotationOffset.value=(0,_reactNativeReanimated.withSequence)((0,_reactNativeReanimated.withTiming)(-3,{duration:100}),(0,_reactNativeReanimated.withRepeat)((0,_reactNativeReanimated.withTiming)(3,{duration:200,easing:_reactNativeReanimated.Easing.out(_reactNativeReanimated.Easing.ease)}),-1,true));},[rotationOffset]);var stopRotate=(0,_react.useCallback)(function(){if(rotationOffset.value===0){return;}rotationOffset.value=0;},[rotationOffset]);var restore=(0,_react.useCallback)(function(){movementOffset.value={x:0,y:0};},[movementOffset]);var movePrev=(0,_react.useCallback)(function(){if(index%numColumns===0){movementOffset.value={x:itemWidth*(numColumns-1),y:-itemHeight};}else{movementOffset.value={x:-itemWidth,y:0};}},[index,itemWidth,itemHeight,numColumns,movementOffset]);var moveNext=(0,_react.useCallback)(function(){if(index%numColumns===numColumns-1){movementOffset.value={x:-itemWidth*(numColumns-1),y:itemHeight};}else{movementOffset.value={x:itemWidth,y:0};}},[index,itemWidth,itemHeight,numColumns,movementOffset]);(0,_react.useEffect)(function(){if(shouldVibrate===false){return;}if(isEditing===true){setTimeout(startRotate,Math.random()*300);}else{stopRotate();}},[isEditing,shouldVibrate,startRotate,stopRotate]);(0,_react.useEffect)(function(){if(isDraggingItem||!isEditing){return;}switch(animDirection){case _models.MOVEMENT.restore:restore();break;case _models.MOVEMENT.next:moveNext();break;case _models.MOVEMENT.prev:movePrev();break;}},[isDraggingItem,isEditing,animDirection,moveNext,movePrev,restore]);return{movementOffset:movementOffset,animatedStyles:animatedStyles};};exports.default=_default;
//# sourceMappingURL=useReanimHooks.js.map